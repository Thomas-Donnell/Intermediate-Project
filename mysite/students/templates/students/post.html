<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ELearn-posts</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <link rel="stylesheet" href="{% static 'css/post.css' %}">
    <!-- Fontawesome Link for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
  </head>
    <body>
        <header>
            <nav class="navbar">
                <h2 class="logo"><a href="{% url 'students:home' %}">ELearn</a></h2>
                <ul class="all-links">
                    <li id="username"><span>Hello,  {{request.user}}</span></li>
                    <li><a href="">Settings</a></li>
                    <li><a href="">Logout</a></li>
                    <li id="bell-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="white" d="M4 19v-2h2v-7q0-2.075 1.25-3.688T10.5 4.2v-.7q0-.625.438-1.063T12 2q.625 0 1.063.438T13.5 3.5v.7q2 .5 3.25 2.113T18 10v7h2v2H4Zm8 3q-.825 0-1.413-.588T10 20h4q0 .825-.588 1.413T12 22Z"/></svg>
                    </li>
                </ul>
            </nav>
        </header>
        <div id="backbtn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 18h3.75a5.25 5.25 0 1 0 0-10.5H5M7.5 4L4 7.5L7.5 11"/></svg></div> 
        {% if post.author == request.user %}
            <div id="delete-btn" data-class-id= "{{ post.id }}" data-class-courseId= "{{ courseId }}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 6L6 18M6 6l12 12"/></svg>
            </div>
        {% endif %}
        <div id="coursediv">
            <div class="form-wrapper">
                <form action="" method="POST">
                    {% csrf_token %}
                    <label for="message" class="textarea-label"> Reply to Post</label>
                    <div class="textarea">
                        <textarea
                            rows="6"
                            name="message"
                            id="message"
                            placeholder="Enter Text Here!"
                            class="textarea-input"
                        ></textarea>
                    </div>
                    <button class="btn">
                        Reply
                    </button>
                </form>
            </div>
        </div>
        <div id="contentwrapper">
            <div id="content" id="bell-icon">
                <div id="wrapper">
                    <div id="post-wrapper">
                        <h2>{{post.subject}} - {{post.author}}</h2>
                        <div id="message">
                            <p>{{post.message}}</p>
                        </div>
                        <div id="link-wrapper">
                            <div id="reply-btn">Reply</div>
                            {% if post.file %}
                                <a href="{{ post.file.url }}"><span>{{ fileName }}</span></a>
                            {% endif %}
                        </div>
                    </div>
                    <h2 id="reply-header">Replies</h2>
                    <div id="replies-wrapper">
                        {% for reply in replies %}
                        <div class="replies">
                            <strong>{{ reply.author }}</strong> - {{ reply.created_at }}
                            <p>{{ reply.message }}</p>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

        <script>
            const csrfToken = "{{ csrf_token }}";
        </script>
        <script src="{% static 'js/reply.js' %}"></script>
    </body>
</html>